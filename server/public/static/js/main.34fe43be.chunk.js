(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(67)},44:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(34),r=n.n(o),s=n(1),c=n(2),l=n(4),u=n(3),h=n(5),m=n(15),p=(n(44),n(13)),d=n(6),f=n(35),g=n.n(f),v=function(e){if(console.error(e),e.response&&e.response.data)throw console.error("API response",e.response.data),e.response.data.message;throw e},b=function e(){var t=this;Object(s.a)(this,e),this.signup=function(e,n){return t.service.post("/auth/signup",{username:e,password:n}).then(function(e){return e.data}).catch(v)},this.login=function(e,n){return t.service.post("/auth/login",{username:e,password:n}).then(function(e){return e.data}).catch(v)},this.loggedin=function(){return t.service.get("/auth/loggedin").then(function(e){return e.data}).catch(v)},this.logout=function(){return t.service.get("/auth/logout").then(function(e){return e.data}).catch(v)},this.addClient=function(e){return t.service.post("/addClient",{clientName:e}).then(function(e){return e.data}).catch(v)},this.showAllClients=function(){return t.service.get("/allClients").then(function(e){return e.data}).catch(v)},this.addUserPicture=function(e){var n=new FormData;return n.append("photo",e),t.service.post("/users/Userpic",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data}).catch(v)},this.getUserData=function(){return t.service.get("/user").then(function(e){return e.data}).catch(v)},this.getSingleClient=function(e){return t.service.post("/clientData",{clientID:e}).then(function(e){return e.data}).catch(v)},this.addNewLook=function(e,n,a){console.log(e,n);var i=new FormData;return i.append("photo",a),i.append("newLook",e),t.service.post("/client/".concat(n,"/addNewLook"),i).then(function(e){return e.data}).catch(v)},this.addNewInfo=function(e,n,a){return t.service.post("/client/".concat(n,"/addNewInfo"),{newInfo:e,infoTitle:a}).then(function(e){return e.data}).catch(v)},this.service=g.a.create({baseURL:"https://rafaclients.herokuapp.com",withCredentials:!0})},E=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={id:n.props.identificador},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Cliente:",this.props.nombre))}}]),t}(a.Component),O=n(8),j=n(36),D=n(22),w={duration:400,ease:[.08,.69,.2,.99]},k=D.a.div({zoomedIn:{applyAtStart:{display:"block"},opacity:1},zoomedOut:{applyAtEnd:{display:"none"},opacity:0}}),y=D.a.img({zoomedIn:{position:"fixed",top:0,left:0,bottom:0,right:0,width:600,height:600,flip:!0,transition:w},zoomedOut:{position:"static",width:200,height:200,flip:!0,transition:w}}),C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={isZoomed:!1},n.zoomOut=function(){window.removeEventListener("scroll",n.zoomOut),n.setState({isZoomed:!1})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"zoomIn",value:function(){window.addEventListener("scroll",this.zoomOut),this.setState({isZoomed:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.imageWidth,a=t.imageHeight,o=Object(j.a)(t,["imageWidth","imageHeight"]),r=this.state.isZoomed?"zoomedIn":"zoomedOut";return i.a.createElement("div",{className:"image-frame",onClick:function(){return e.state.isZoomed?e.zoomOut():e.zoomIn()},style:{width:n,height:a}},i.a.createElement(k,{pose:r,className:"frame"}),i.a.createElement(y,Object.assign({className:"ZoomImage",pose:r},o)))}}]),t}(i.a.Component),I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getUserData=function(){n.service.getUserData().then(function(e){n.setState(Object(d.a)({},n.state,{userData:e}))})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.addClient;n.service.addClient(t).then(function(e){n.setState(Object(d.a)({},n.state,{addClient:"",allClients:e.clients}))}).catch(function(e){n.setState({addClient:t,error:!0})})},n.handleClientChange=function(e){var t=e.target,a=t.name,i=t.value;n.setState(Object(p.a)({},a,i))},n.state={addClient:"",allClients:[],userPhoto:{},file:null,userData:{}},n.service=new b,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.showAllClients().then(function(t){e.setState(Object(d.a)({},e.state,{allClients:t}))})}},{key:"componentWillMount",value:function(){this.getUserData()}},{key:"handlePhotoSubmit",value:function(e){e.preventDefault(),this.service.addUserPicture(this.state.file),this.getUserData()}},{key:"handlePhotoChange",value:function(e){this.setState(Object(d.a)({},this.state,{file:e.target.files[0]}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.props.logout},"Logout"),i.a.createElement("h1",null,"Bienvenido ",this.state.userData.username),i.a.createElement("h2",null,"Add a new client:"),i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("input",{type:"text",name:"addClient",value:this.state.addClient,onChange:function(t){return e.handleClientChange(t)}}),i.a.createElement("input",{type:"submit",value:"Add Client",onClick:this.showAllClients})),i.a.createElement("div",{className:"clientsList"},this.state.allClients.map(function(e,t){return i.a.createElement("div",{key:t},i.a.createElement(O.b,{to:"/client/"+e._id},i.a.createElement(E,{nombre:e.clientName,identificador:e._id})))})),i.a.createElement("form",{onSubmit:function(t){return e.handlePhotoSubmit(t)}},i.a.createElement("input",{type:"file",onChange:function(t){return e.handlePhotoChange(t)}})," ",i.a.createElement("br",null),i.a.createElement("button",{type:"submit"},"Update your profile pic")),i.a.createElement("div",{className:"userPic"},this.state.userData.picture?i.a.createElement(C,{src:this.state.userData.picture[0].imgPath,alt:this.state.userData.picture[0].imgName}):""))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.signup(t,a).then(function(e){n.setState({username:"",password:""})}).catch(function(e){n.setState({username:t,password:a,error:!0})})},n.handleChange=function(e){var t=e.target,a=t.name,i=t.value;n.setState(Object(p.a)({},a,i))},n.state={username:"",password:""},n.service=new b,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("label",null,"Username:"),i.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),i.a.createElement("label",null,"Password:"),i.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),i.a.createElement("input",{type:"submit",value:"Signup"})),i.a.createElement("p",null,"Already have account?",i.a.createElement(O.b,{to:"/login"}," Login")))}}]),t}(a.Component),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then(function(e){n.setState({username:"",password:""}),n.props.getUser(e)}).catch(function(e){return console.log(e)})},n.handleChange=function(e){var t=e.target,a=t.name,i=t.value;n.setState(Object(p.a)({},a,i))},n.state={username:"",password:""},n.service=new b,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("label",null,"Username:"),i.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),i.a.createElement("label",null,"Password:"),i.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),i.a.createElement("input",{type:"submit",value:"Login"})),i.a.createElement("p",null,"Don't have account?",i.a.createElement(O.b,{to:"/signup"}," Signup")))}}]),t}(a.Component),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"home"},i.a.createElement("h1",null,"Welcome to myClients app"),i.a.createElement("div",{className:"logLink"},"  ",i.a.createElement(O.b,{className:"link",to:"/login"}," ",i.a.createElement("h1",null,"Login"),"  ")),i.a.createElement("div",{className:"signLink"}," ",i.a.createElement(O.b,{className:"link",to:"/signup"}," ",i.a.createElement("h1",null,"Signup"),"  ")))}}]),t}(a.Component),U=n(18),F=n(17),x=n.n(F),A=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={timeStamp:null},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(d.a)({},this.state,{timeStamp:x()(this.props.created_at).format("dddd, MMMM Do YYYY, H:mm ")}))}},{key:"render",value:function(){return i.a.createElement("li",{className:"singleLook"},i.a.createElement("div",{className:"img-description-time-wrapper"},i.a.createElement(C,{src:this.props.picture}),i.a.createElement("p",null,"Description: ",this.props.lookDescription),i.a.createElement("span",{className:"timestamp"},this.state.timeStamp)))}}]),t}(a.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("ol",{className:"Look-list"},this.props.looks.map(function(e){return i.a.createElement(A,Object.assign({key:e._id},e))}))}}]),t}(a.Component),P=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).addNewLook=function(e){e.preventDefault();var t=n.state.newLookDescription,a=n.state.clientID,i=n.state.newLookFile;n.service.addNewLook(t,a,i).then(function(e){console.log(e);var t=Object(U.a)(n.state.looksData);t.unshift(e),n.setState(Object(d.a)({},n.state,{looksData:t,newLookDescription:"",newLookFile:null}))})},n.state={newLookDescription:"",newLookFile:null,looksData:n.props.looksData,clientID:n.props.clientID},n.service=new b,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"updateNewLookDescription",value:function(e){this.setState(Object(d.a)({},this.state,{newLookDescription:e.target.value}))}},{key:"handlePhotoChange",value:function(e){this.setState(Object(d.a)({},this.state,{newLookFile:e.target.files[0]}))}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{className:"task-collection"},i.a.createElement("form",{onSubmit:this.addNewLook,encType:"multipart/form-data"},i.a.createElement("input",{type:"text",placeholder:"Add a new Look description",className:"add-new-look",value:this.state.newLookDescription,onChange:function(t){return e.updateNewLookDescription(t)}}),i.a.createElement("input",{type:"file",placeholder:"add your look pic",onChange:function(t){return e.handlePhotoChange(t)}})," ",i.a.createElement("br",null),i.a.createElement("input",{type:"submit",value:"add your cool look"})),this.state.looksData?i.a.createElement(M,{looks:this.state.looksData}):null)}}]),t}(a.Component),T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={timeStamp:null,infoID:n.props.infoID},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(d.a)({},this.state,{timeStamp:x()(this.props.created_at).format("dddd, MMMM Do YYYY, H:mm ")}))}},{key:"render",value:function(){return i.a.createElement("li",{className:"singleInfo"},i.a.createElement("div",{className:"description-time-wrapper"},this.props?i.a.createElement("p",null,this.props.infoData):null))}}]),t}(a.Component),z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("ol",{className:"infos-list"},this.props?this.props.infoData.map(function(t,n){return i.a.createElement(T,{key:n,infoData:t,infoID:e.props.infoID})}):null)}}]),t}(a.Component),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={newInfoDescription:"",infoData:n.props.infoData,clientID:n.props.clientID,infoTitle:n.props.infoTitle,infoID:n.props.infoID},n.service=new b,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"addNewInfo",value:function(e){var t=this,n=this.state.newInfoDescription,a=this.state.clientID,i=this.state.infoTitle;"Enter"===e.key&&this.service.addNewInfo(n,a,i).then(function(e){var n=Object(U.a)(t.state.infoData);n.unshift(e),t.setState(Object(d.a)({},t.state,{looks:n,newInfoDescription:""}))})}},{key:"updateNewInfoDescription",value:function(e){this.setState(Object(d.a)({},this.state,{newInfoDescription:e.target.value}))}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{className:"info-collection"},i.a.createElement("h1",null,this.state.infoTitle),i.a.createElement("input",{type:"text",placeholder:"Add a new Info description",className:"add-new-info",value:this.state.newInfoDescription,onChange:function(t){return e.updateNewInfoDescription(t)},onKeyDown:function(t){return e.addNewInfo(t)}}),this.state.infoData?i.a.createElement(z,{infoData:this.state.infoData,infoID:this.state.infoID}):null)}}]),t}(a.Component),Y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).getSingleClient=function(){var t=e.props.match.params.id;e.service.getSingleClient(t).then(function(t){console.log(t),e.setState(Object(d.a)({},e.state,{clientData:t}))}).catch(function(e){console.log(e)})},e.sendCorrectInfo=function(){console.log(e.state.clientData)},e.state={clientData:null},e.service=new b,e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getSingleClient(),setTimeout(function(){e.sendCorrectInfo()},200)}},{key:"render",value:function(){var e=this;return console.log(this.state.clientData),i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(O.b,{to:"/profile"},"Volver al perfil")),this.state.clientData?i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Aqui esta el perfil de: ",this.state.clientData.clientName)):null,i.a.createElement("div",{className:"looksInClient"},this.state.clientData?i.a.createElement(i.a.Fragment,null,i.a.createElement(P,{clientID:this.state.clientData._id,looksData:this.state.clientData.looks})):null),i.a.createElement("div",{className:"infosInClient"},this.state.clientData?i.a.createElement(i.a.Fragment,null,this.state.clientData.infos.map(function(t){return i.a.createElement(_,{key:t._id,clientID:e.state.clientData._id,infoData:t.infoData,infoTitle:t.infoTitle,infoID:t._id})})):null))}}]),t}(a.Component),W=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).fetchUser=function(){null===n.state.loggedInUser&&n.service.loggedin().then(function(e){n.setState({loggedInUser:e})}).catch(function(e){n.setState({loggedInUser:!1})})},n.getTheUser=function(e){n.setState({loggedInUser:e})},n.logout=function(){n.service.logout().then(function(){n.setState({loggedInUser:null}),n.props.history.push("/")})},n.state={loggedInUser:null},n.service=new b,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?i.a.createElement(i.a.Fragment,null,i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:"/",render:function(){return i.a.createElement(m.a,{to:"/profile"})}}),i.a.createElement(m.b,{exact:!0,path:"/login",render:function(){return i.a.createElement(m.a,{to:"/profile"})}}),i.a.createElement(m.b,{exact:!0,path:"/profile",render:function(){return i.a.createElement(I,Object.assign({},e.state.loggedInUser,{logout:e.logout}))}}),i.a.createElement(m.b,{exact:!0,path:"/client/:id",component:Y}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:"/",render:function(){return i.a.createElement(L,null)}}),i.a.createElement(m.b,{exact:!0,path:"/signup",render:function(){return i.a.createElement(S,{getUser:e.getTheUser})}}),i.a.createElement(m.b,{exact:!0,path:"/login",render:function(){return i.a.createElement(N,{getUser:e.getTheUser})}})))}}]),t}(a.Component),Z=Object(m.g)(W);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(O.a,null,i.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.34fe43be.chunk.js.map